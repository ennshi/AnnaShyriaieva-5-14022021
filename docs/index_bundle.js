(()=>{"use strict";var n={974:(n,e,t)=>{t.d(e,{Z:()=>i});var a=t(645),r=t.n(a)()((function(n){return n[1]}));r.push([n.id,':root {\n  --primary: #f3eaf3;\n  --secondary: #452b32;\n  --accent-one: #a468bc;\n  --accent-one-light: #c9a4e7;\n  --accent-two: #847c84;\n  --accent-three: #ffd3ee;\n}\n\nhtml,\nbody {\n  font-family: "Verdana", sans-serif;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n}\n\nbody {\n  min-height: 100vh;\n  overflow-x: hidden;\n  background: var(--accent-one-light);\n  background: -webkit-linear-gradient(\n    0deg,\n    var(--accent-one-light) 0%,\n    var(--primary) 80%\n  );\n  background: linear-gradient(\n    0deg,\n    var(--accent-one-light) 0%,\n    var(--primary) 80%\n  );\n}\n\n* {\n  box-sizing: border-box;\n}\n\nh1,\nh2 {\n  margin: 0;\n}\n\na {\n  text-decoration: none;\n  transition: opacity 0.5s;\n}\n\na:hover {\n  opacity: 0.8;\n}\n\nul {\n  padding: 0;\n  list-style: none;\n}\n\nbutton,\nbutton:focus {\n  border: none;\n  outline: none;\n  cursor: pointer;\n  background: transparent;\n}\n\ninput {\n  border: none;\n  border-radius: 8px;\n  padding: 7px;\n  transition: all 0.7s;\n}\n\ninput:focus {\n  outline: none;\n  box-shadow: 0 4px 20px -3px rgba(0, 0, 0, 0.2);\n}\n\n/* navigation */\n\n.navbar__container {\n  background-color: var(--primary);\n}\n\n.navbar__inner-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  max-width: 945px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n.navbar__container a {\n  color: var(--accent-one);\n}\n\n.navbar__container i {\n  font-size: 2rem;\n  color: var(--accent-one);\n}\n\n.cart-btn__container {\n  position: relative;\n}\n\n.badge--cart {\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  width: 20px;\n  height: 20px;\n  background-color: var(--secondary);\n  color: white;\n  border-radius: 50%;\n  display: grid;\n  place-items: center;\n  font-size: 0.8rem;\n}\n/* main */\n\n.main__wrapper {\n  max-width: 945px;\n  width: 100%;\n  padding: 16px;\n  margin: 0 auto;\n}\n\n.header {\n  width: 100%;\n  text-align: center;\n  color: var(--secondary);\n}\n\n/* bear-list */\n\n.bear-list__container {\n  margin-top: 30px;\n  margin-bottom: 50px;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, 300px);\n  justify-content: space-evenly;\n  grid-gap: 20px;\n}\n\n.bear-card__container {\n  display: flex;\n  width: 300px;\n  height: 250px;\n  flex-direction: column;\n  border-radius: 18px;\n  background-color: rgba(255, 255, 255, 0.4);\n  box-shadow: 0px 4px 20px -3px rgba(0, 0, 0, 0.1);\n  margin: 16px 15px;\n  box-sizing: border-box;\n  padding: 10px;\n  transition: all 0.7s;\n  cursor: pointer;\n}\n\n.bear-card__container:hover {\n  box-shadow: 0 4px 20px -3px rgba(0, 0, 0, 0.2);\n  background-color: rgba(255, 255, 255, 0.6);\n}\n\n.card-media__container {\n  width: 100%;\n  overflow: hidden;\n  border-top-left-radius: 18px;\n  border-top-right-radius: 18px;\n  position: relative;\n}\n\n.card-media__img {\n  max-width: 300px;\n  height: 167px;\n  object-fit: cover;\n  width: 100%;\n}\n\n.card-body__container {\n  padding-top: 10px;\n  display: flex;\n}\n\n.card-body__left-block {\n  flex: 1;\n}\n\n.card-body__title {\n  font-size: 1.2rem;\n  color: var(--secondary);\n}\n\n.card-body__price {\n  color: var(--secondary);\n  font-weight: bold;\n  font-size: 1rem;\n}\n\n/* button */\n\n.btn--basic {\n  border-radius: 16px;\n  background-color: var(--accent-one);\n  padding: 12px 20px;\n  color: white;\n  font-weight: bold;\n  font-size: 1rem;\n  transition: all 0.8s;\n  box-shadow: 0px 4px 20px -3px rgba(0, 0, 0, 0.1);\n}\n\n.btn--basic:hover {\n  box-shadow: 0 4px 20px -3px rgba(0, 0, 0, 0.2);\n  opacity: 0.7;\n}\n\n.btn--counter {\n  color: var(--secondary);\n  background-color: white;\n  border-radius: 16px;\n  display: grid;\n  align-items: center;\n  margin: 6px;\n  font-size: 1rem;\n  line-height: 1rem;\n  box-shadow: 0px 4px 20px -3px rgba(0, 0, 0, 0.1);\n  min-width: 25px;\n  height: 30px;\n}\n\n.btn--counter:hover {\n  box-shadow: 0 4px 20px -3px rgba(0, 0, 0, 0.2);\n  opacity: 0.7;\n}\n\n/* select */\n\nselect {\n  width: fit-content;\n  border-radius: 12px;\n  border: none;\n  box-shadow: 0px 4px 20px -3px rgba(0, 0, 0, 0.1);\n  color: var(--secondary);\n  padding: 10px 10px;\n  font-weight: bold;\n  font-size: 1rem;\n}\n\nselect:hover {\n  box-shadow: 0 4px 20px -3px rgba(0, 0, 0, 0.2);\n}\n\n/*colors selector*/\n\n.colors__btn,\n.colors__btn:focus,\n.colors__btn:active {\n  width: 20px;\n  height: 20px;\n  margin: 5px 3px;\n  border-radius: 50%;\n  border: 4px solid transparent;\n}\n\n.btn--selected,\n.btn--selected:focus,\n.colors__btn:active {\n  border: 4px solid var(--accent-one);\n}\n\n.btn--buy-icon {\n  position: absolute;\n  padding: 5px;\n  bottom: 5px;\n  right: 10px;\n  font-size: 1.7rem;\n  color: var(--accent-one);\n  z-index: 1000;\n  background-color: transparent;\n  cursor: pointer;\n}\n\n/* bear details */\n.bear-details__section {\n  max-width: 945px;\n}\n\n.bear-details__container {\n  margin: 30px auto;\n  padding: 18px;\n  border-radius: 18px;\n  background-color: rgba(255, 255, 255, 0.4);\n  box-shadow: 0px 4px 20px -3px rgba(0, 0, 0, 0.1);\n  display: flex;\n  flex-wrap: wrap;\n  align-content: center;\n  justify-content: center;\n}\n\n.bear-details__img-container {\n  border-radius: 18px;\n  flex: 1 0;\n  min-width: 280px;\n}\n\n.bear-details__img {\n  border-radius: 18px;\n  object-fit: cover;\n  width: 100%;\n}\n\n.bear-details__info-container {\n  display: flex;\n  flex: 1 0;\n  flex-direction: column;\n  justify-content: space-around;\n  padding: 0 18px;\n  min-width: 280px;\n  max-width: calc(100% - 36px);\n}\n\n.bear-details__buy-block {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.bear-details__price {\n  color: var(--secondary);\n  font-weight: bold;\n  font-size: 1.2rem;\n}\n\n/* cart */\n.cart__subtitle {\n  text-align: center;\n  font-size: 1.2rem;\n  color: var(--secondary);\n  margin-top: 70px;\n}\n\n.cart__section {\n  margin: 0 auto;\n  max-width: 400px;\n}\n\n.cart__empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 30px;\n}\n\n.cart__list {\n  background-color: rgba(255, 255, 255, 0.4);\n  box-shadow: 0px 4px 20px -3px rgba(0, 0, 0, 0.1);\n  margin: 30px auto;\n  padding: 18px;\n  border-radius: 18px;\n}\n\n.cart-card__container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n  margin: 15px;\n}\n\n.cart-card__container:last-child {\n  margin-top: 25px;\n}\n\n.cart-card__title {\n  flex: 1;\n  min-width: 100px;\n  font-size: 1rem;\n  color: var(--secondary);\n  font-weight: bold;\n}\n\n.cart-card__color {\n  flex: 1;\n  min-width: 70px;\n  font-size: 0.8rem;\n  margin-left: 10px;\n}\n\n.cart-card__total-price {\n  margin-right: 10px;\n  font-size: 0.8rem;\n  font-weight: bold;\n  color: var(--secondary);\n}\n\n/* counter */\n\n.counter__container {\n  flex-wrap: nowrap;\n  min-width: 70px;\n  display: flex;\n  align-items: center;\n  flex: 1;\n}\n\n/* form */\n\n.form__container {\n  width: 100%;\n  display: grid;\n  place-items: center;\n}\n\n.form__inner-container {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.form__field-container {\n  width: 100%;\n  padding: 8px 0;\n}\n\n.form__field {\n  display: flex;\n}\n\n.form__field-container label,\n.form__field-container input {\n  flex: 1;\n}\n\n.form__submit-btn {\n  margin: 20px auto;\n}\n\n.form__error {\n  width: 100%;\n  font-size: 0.7rem;\n  display: inline-block;\n  color: var(--accent-one);\n  padding-right: 5px;\n  text-align: right;\n}\n\n.form__btn-container {\n  margin-top: 35px;\n  margin-bottom: 40px;\n}\n\n/* order success */\n\n.order-success__container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  max-width: 500px;\n  word-wrap: break-word;\n  margin: 70px auto;\n}\n\n@media screen and (max-width: 300px) {\n  .bear-details__img-container,\n  .bear-details__info-container {\n    min-width: 100%;\n  }\n\n  .cart-card__container {\n    margin: 30px 0;\n  }\n}\n\n@media screen and (max-width: 700px) {\n  .bear-details__container {\n    max-width: 420px;\n  }\n\n  .bear-details__img-container {\n    min-width: 100%;\n    margin-bottom: 20px;\n  }\n\n  .bear-details__desc,\n  .bear-details__buy-block {\n    margin-bottom: 30px;\n    min-width: 100%;\n  }\n\n  .bear-details__buy-block button,\n  .bear-details__buy-block span {\n    margin-top: 30px;\n  }\n\n  .bear-details__info-container {\n    padding: 0 8px;\n  }\n}\n',""]);const i=r},645:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t=n(e);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t})).join("")},e.i=function(n,t,a){"string"==typeof n&&(n=[[null,n,""]]);var r={};if(a)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var c=0;c<n.length;c++){var s=[].concat(n[c]);a&&r[s[0]]||(t&&(s[2]?s[2]="".concat(t," and ").concat(s[2]):s[2]=t),e.push(s))}},e}},379:(n,e,t)=>{var a,r=function(){var n={};return function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}n[e]=t}return n[e]}}(),i=[];function o(n){for(var e=-1,t=0;t<i.length;t++)if(i[t].identifier===n){e=t;break}return e}function c(n,e){for(var t={},a=[],r=0;r<n.length;r++){var c=n[r],s=e.base?c[0]+e.base:c[0],l=t[s]||0,d="".concat(s," ").concat(l);t[s]=l+1;var p=o(d),m={css:c[1],media:c[2],sourceMap:c[3]};-1!==p?(i[p].references++,i[p].updater(m)):i.push({identifier:d,updater:b(m,e),references:1}),a.push(d)}return a}function s(n){var e=document.createElement("style"),a=n.attributes||{};if(void 0===a.nonce){var i=t.nc;i&&(a.nonce=i)}if(Object.keys(a).forEach((function(n){e.setAttribute(n,a[n])})),"function"==typeof n.insert)n.insert(e);else{var o=r(n.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var l,d=(l=[],function(n,e){return l[n]=e,l.filter(Boolean).join("\n")});function p(n,e,t,a){var r=t?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(n.styleSheet)n.styleSheet.cssText=d(e,r);else{var i=document.createTextNode(r),o=n.childNodes;o[e]&&n.removeChild(o[e]),o.length?n.insertBefore(i,o[e]):n.appendChild(i)}}function m(n,e,t){var a=t.css,r=t.media,i=t.sourceMap;if(r?n.setAttribute("media",r):n.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleSheet)n.styleSheet.cssText=a;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(a))}}var u=null,g=0;function b(n,e){var t,a,r;if(e.singleton){var i=g++;t=u||(u=s(e)),a=p.bind(null,t,i,!1),r=p.bind(null,t,i,!0)}else t=s(e),a=m.bind(null,t,e),r=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)};return a(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;a(n=e)}else r()}}n.exports=function(n,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var t=c(n=n||[],e);return function(n){if(n=n||[],"[object Array]"===Object.prototype.toString.call(n)){for(var a=0;a<t.length;a++){var r=o(t[a]);i[r].references--}for(var s=c(n,e),l=0;l<t.length;l++){var d=o(t[l]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}t=s}}}},615:(n,e,t)=>{n.exports=t.p+"ba120a0d3518587db6c6.webp"}},e={};function t(a){var r=e[a];if(void 0!==r)return r.exports;var i=e[a]={id:a,exports:{}};return n[a](i,i.exports,t),i.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var a in e)t.o(e,a)&&!t.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:e[a]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),(()=>{var n;t.g.importScripts&&(n=t.g.location+"");var e=t.g.document;if(!n&&e&&(e.currentScript&&(n=e.currentScript.src),!n)){var a=e.getElementsByTagName("script");a.length&&(n=a[a.length-1].src)}if(!n)throw new Error("Automatic publicPath is not supported in this browser");n=n.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=n})(),(()=>{const n="#",e="#panier",a="#ours",r="#succes",i={Tan:"tan",Chocolate:"chocolate",Black:"black",White:"white","Pale brown":"#987654","Dark brown":"#654321",Brown:"brown",Blue:"blue",Pink:"pink",Beige:"#f5f5dc"},o=[{fieldName:"firstName",label:"Prénom",type:"text",validate:{required:!0,min:2,max:20,pattern:/^[a-zA-Z]+$/}},{fieldName:"lastName",label:"Nom",type:"text",validate:{required:!0,min:2,max:20,pattern:/^[a-zA-Z]+$/}},{fieldName:"address",label:"Adresse",type:"text",validate:{required:!0,min:5,max:20}},{fieldName:"city",label:"Ville",type:"text",validate:{required:!0,min:2,max:20}},{fieldName:"email",label:"E-mail",type:"email",validate:{required:!0,pattern:/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/}}],c={hash:n,cb:()=>{},defaultRoute:!0},s=new class{constructor(){this.routes=[]}init(){window.onload=()=>{this.navigate(window.location.hash)},window.onhashchange=()=>{this.navigate(window.location.hash)}}set(n,e,t){this.routes.find((e=>e.hash===n))||this.routes.push({hash:n,cb:e,defaultRoute:t})}navigate(n){const e=this.routes.find((e=>e.hash===(n=>n?n.split("?")[0]:"")(n)));return e?(window.location.hash!==n&&window.history.pushState({},"",n),e.cb((n=>{if(!n)return{};const e=n.split("?")[1];return e?e.split("&").map((n=>n.split("="))).reduce(((n,e)=>(n[e[0]]=e[1],n)),{}):{}})(n))):this.replaceWithDefaultRoute()}replaceWithDefaultRoute(){const n=this.routes.find((n=>n.defaultRoute))||c;return window.history.replaceState({},"",n.hash),window.location.hash=n.hash,n.cb()}};async function l(n,e="GET",t=null){const a="https://backend-for-bears.herokuapp.com/api/teddies"+n,r={mode:"cors",method:e};return"POST"===e&&t&&Object.assign(r,{headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),fetch(a,r).then((n=>n.ok?n.json():Promise.reject(Error("Failed to load")))).then((n=>n)).catch((n=>{throw n}))}const d=new class{async getAllBears(){const n=this.getAllBearsFromSessionStorage();if(n)return n;try{const n=await l("/");return sessionStorage.setItem("bears",JSON.stringify(n)),n}catch(n){throw n}}async getBearById(n){if(!n)return;const e=this.getAllBearsFromSessionStorage();if(e)return e.find((e=>e._id===n));const t=`/${n}`;try{return await l(t)}catch(n){throw n}}getAllBearsFromSessionStorage(){const n=sessionStorage.getItem("bears");return n?JSON.parse(n):null}};function p({tagName:n,className:e,attributes:t={}}){const a=document.createElement(n);if(e){const n=e.split(" ").filter(Boolean);a.classList.add(...n)}return Object.keys(t).forEach((n=>a.setAttribute(n,t[n]))),a}function m(n){const e=p({tagName:"h1",className:"header"});return e.innerText=n,e}const u=new class{displayItemsNumber(n){const e=document.getElementById("cart-badge");if(n)return void(e.innerText=n);const t=this.getItemsFromCart();e.innerText=`${t.length}`}getItemsFromCart(){const n=localStorage.getItem("cart");return n?JSON.parse(n):[]}addItemToCart({item:n,amount:e=1}){if(!n)return;const t=this.getItemsFromCart();if(!t.length)return localStorage.setItem("cart",JSON.stringify([{item:n,amount:e}])),void this.displayItemsNumber(1);const a=t.findIndex((e=>e.item.id===n.id&&e.item.color===n.color));if(!~a)return localStorage.setItem("cart",JSON.stringify([...t,{item:n,amount:e}])),void this.displayItemsNumber(t.length+1);const r=[...t];r[a].amount+=e,localStorage.setItem("cart",JSON.stringify(r))}removeItemFromCart(n,e,t=0){const a=this.getItemsFromCart(),r=a.findIndex((t=>t.item.id===n&&t.item.color===e));if(!n||!a.length||!~r)return;const i=a[r].amount,o=[...a];if(t&&i>t)return o[r].amount-=t,void localStorage.setItem("cart",JSON.stringify(o));o.splice(r,1),localStorage.setItem("cart",JSON.stringify(o)),this.displayItemsNumber(a.length-1)}getTotalPrice(){const n=this.getItemsFromCart();return n?n.reduce(((n,{amount:e,item:t})=>n+t.price*e),0):0}clearCart(){localStorage.removeItem("cart"),this.displayItemsNumber()}};async function g(n){try{const e=await d.getAllBears();n.innerHTML="",n.appendChild(function(n){const e=p({tagName:"section",className:"bear-list__wrapper"}),t=m("Ours en peluche"),a=p({tagName:"div",className:"bear-list__container"});return n.forEach((n=>a.appendChild(function({_id:n,name:e,imageUrl:t,price:a,colors:r}){const o=p({tagName:"article",className:"bear-card__container"}),{getSelectedColor:c,setSelectedColor:l}=function(n=["white"]){let e=n[0];return{setSelectedColor:t=>{e=n[t]||n[0]},getSelectedColor:()=>e}}(r),d=function({colors:n,_id:e},{getSelectedColor:t,setSelectedColor:a}){const r=p({tagName:"div",className:"colors__container",attributes:{id:`colorsContainer-${e}`}});return n.forEach(((n,o)=>{const c=p({tagName:"button",className:t()===n?"colors__btn btn--selected":"colors__btn",attributes:{"aria-label":`${n}`}});c.style.backgroundColor=i[n]||i.White,c.addEventListener("click",(n=>{n.stopPropagation(),[...document.getElementById(`colorsContainer-${e}`).children].forEach((n=>n.classList.remove("btn--selected"))),a(o),c.classList.add("btn--selected")})),r.appendChild(c)})),r}({colors:r,_id:n},{setSelectedColor:l,getSelectedColor:c}),m=function({name:n}){const e=p({tagName:"button",className:"btn--buy-icon",attributes:{"aria-label":`Ajouter l'ours ${n} au panier`}}),t=p({tagName:"i",className:"fas fa-shopping-cart"});return e.appendChild(t),e}({name:e});m.addEventListener("click",(t=>{t.stopPropagation();const r={id:n,name:e,price:a,color:c()};u.addItemToCart({item:r})})),o.addEventListener("click",(()=>s.navigate(`#ours?_id=${n}`)));const g=function({imageUrl:n,name:e}){const t=n.replace("http","https"),a=p({tagName:"div",className:"card-media__container"}),r=p({tagName:"img",className:"card-media__img",attributes:{src:t,alt:`Ours ${e}`}});return a.appendChild(r),a}({imageUrl:t,name:e});return g.append(m),o.append(g,function({name:n,price:e}){const t=p({tagName:"div",className:"card-body__container"}),a=p({tagName:"div",className:"card-body__right-block"}),r=p({tagName:"div",className:"card-body__left-block"}),i=p({tagName:"h2",className:"card-body__title"});i.innerText=n;const o=p({tagName:"span",className:"card-body__price"});return o.innerText=e+"¥",a.append(o),r.append(i),t.append(r,a),t}({name:e,price:a}),d),o}(n)))),e.append(t,a),e}(e))}catch(n){console.log("error",n)}}function b(n){return!n||"string"!=typeof n||!n.trim()}function f(n,e){return!n||"string"!=typeof n||n.trim().length<e}function h(n,e){return!n||"string"!=typeof n||n.trim().length>e}function x(n,e){return!n||"string"!=typeof n||!e.test(n.trim())}const _=new class{async sendOrder(n){const e=u.getItemsFromCart();if(!n||!e)return;const t=[...new Set(e.map((n=>n.item.id)))],a={contact:{firstName:n.firstName.trim(),lastName:n.lastName.trim(),address:n.address.trim(),city:n.city.trim(),email:n.email.trim()},products:t};try{return await l("/order","POST",a)}catch(n){throw n}}};function v(){const n=o.reduce(((n,{fieldName:e})=>(n[e]=document.getElementById(e).value,n)),{}),e=function(n){const e={};for(const t in n){const a=o.find((n=>n.fieldName===t)),r=n[t];if(!n.hasOwnProperty(t)||!a||!a.validate)return;const i=o.find((n=>n.fieldName===t)).label||"",c=[];for(const n in a.validate)switch(n){case"required":b(r)&&c.push(`${i} est obligatoire`);break;case"min":f(r,a.validate.min)&&c.push(`Doit contenir au moins ${a.validate.min} charactères`);break;case"max":h(r,a.validate.max)&&c.push(`Ne doit pas contenir plus de ${a.validate.max} charactères`);break;case"pattern":x(r,a.validate.pattern)&&c.push("La valeur n'est pas correcte")}c.length&&(e[t]=c)}return Object.keys(e).length?e:null}(n);e?function(n,e){document.getElementById("formFields").innerHTML=y(n,e)}(n,e):_.sendOrder(n).then((n=>{const e=u.getTotalPrice();u.clearCart(),s.navigate(`#succes?total=${e}&id=${n.orderId}`)})).catch((n=>console.log(n)))}function y(n,e){return o.map((t=>`<div class="form__field-container">\n        <div class="form__field">\n          <label>${t.label}</label>\n          <input type="${t.type}" value="${n&&n[t.fieldName]||""}" id="${t.fieldName}"/>\n        </div>\n        ${(()=>{const n=t.fieldName;return e&&e[n]?`<span class="form__error">${e[n][0]}</span>`:""})()}\n      </div>`)).join("")}function N({elId:n,price:e,amount:t}){document.getElementById(n).innerText=e*t+"¥"}function w(e){e.innerHTML="";const t=p({tagName:"section",className:"cart__section"}),a=m("Panier");t.append(a);const r=u.getItemsFromCart(),i=()=>{const e=p({tagName:"div",className:"cart__empty-state"});e.innerHTML='\n            <h2 class="cart__subtitle">Aucun produit...</h2>\n        ';const a=p({tagName:"button",className:"btn--basic"});a.innerText="Voir nos ours",a.addEventListener("click",(()=>s.navigate(n))),e.append(a),t.append(e)};if(r.length){const n=p({tagName:"ul",className:"cart__list"}),e=p({tagName:"li",className:"cart-card__container"}),a=`\n        <span><span class="cart-card__total-price">Prix total:</span>\n        <span id="totalPrice" class="cart-card__title">${u.getTotalPrice()}¥</span></span>\n        `;r.forEach(((e,t)=>{const a=function({item:n,amount:e},t){const a=p({tagName:"li",className:"cart-card__container",attributes:{id:`cart-item-${n.id}-${n.color}`}}),r=p({tagName:"h2",className:"cart-card__title"});r.innerText=n.name;const i=p({tagName:"span",className:"cart-card__color"});i.innerText=n.color;const o=p({tagName:"span",className:"cart-card__color",attributes:{id:`cart-item-prix-${n.id}-${n.color}`}});o.innerText=n.price*e+"¥";const c=function({amount:n,item:{id:e,color:t,price:a}},r){let i=n;const o=p({tagName:"div",className:"counter__container"}),c=p({tagName:"span",className:"counter__value"});c.innerText=i;const s=()=>{c.innerText=i},l=p({tagName:"button",className:"btn--counter"});l.innerHTML="<span>+</span>",l.addEventListener("click",(()=>{i+=1,u.addItemToCart({item:{id:e,color:t}}),N({elId:`cart-item-prix-${e}-${t}`,price:a,amount:i}),C(),s()}));const d=p({tagName:"button",className:"btn--counter"});return d.innerHTML="<span>-</span>",d.addEventListener("click",(()=>{if(i-=1,i<=0){const n=document.getElementById(`cart-item-${e}-${t}`),a=n.parentNode,i=2===a.children.length;return n.remove(),i&&(a.remove(),r(),document.getElementById("form").style.display="none"),u.removeItemFromCart(e,t),void C()}u.removeItemFromCart(e,t,1),N({elId:`cart-item-prix-${e}-${t}`,price:a,amount:i}),C(),s()})),o.append(l,c,d),o}({amount:e,item:n},t);return a.append(r,i,o,c),a}(e,i);n.append(a)})),e.innerHTML=a,n.append(e),t.append(n,function(){const n=p({tagName:"div",className:"form__container",attributes:{id:"form"}}),e=p({tagName:"div",className:"form__inner-container",attributes:{id:"formFields"}});e.innerHTML=y();const t=p({tagName:"div",className:"form__btn-container"}),a=p({tagName:"button",className:"btn--basic"});return a.innerText="Commander",a.addEventListener("click",v),t.append(a),n.append(e,t),n}())}else i();e.append(t)}function C(){const n=document.getElementById("totalPrice");n&&(n.innerText=u.getTotalPrice()+"¥")}async function I(e,{_id:t}){try{const a=await d.getBearById(t);a._id?(e.innerHTML="",e.appendChild(function(n){const e=p({tagName:"section",className:"bear-details__section"}),t=m(`Ours ${n.name}`),a=function(n){const e=p({tagName:"section",className:"bear-details__container"}),t=function({imageUrl:n,name:e}){const t=p({tagName:"div",className:"bear-details__img-container"}),a=p({tagName:"img",className:"bear-details__img",attributes:{alt:`Ours ${e}`,src:n.replace("http","https")}});return t.append(a),t}({imageUrl:n.imageUrl,name:n.name}),a=function({price:n,description:e,name:t,colors:a,_id:r}){const i=p({tagName:"div",className:"bear-details__info-container"}),o=function(n){const e=p({tagName:"div",className:"bear-details__select"}),t=p({tagName:"select"});return n.forEach((n=>{const e=p({tagName:"option",attributes:{value:n}});e.innerText=n,t.append(e)})),e.append(t),e}(a),c=p({tagName:"div",className:"bear-details__buy-block"}),s=p({tagName:"span",className:"bear-details__price"});s.innerText=n+"¥";const l=function(){const n=p({tagName:"button",className:"btn--basic"});return n.innerText="Ajouter au panier",n}();l.addEventListener("click",(()=>{const e={id:r,name:t,price:n,color:o.children[0].value};u.addItemToCart({item:e})})),c.append(s,l);const d=p({tagName:"div",className:"bear-details__desc"});return d.innerText=e,i.append(d,o,c),i}(n);return e.append(t,a),e}(n);return e.append(t,a),e}(a))):s.navigate(n)}catch(n){console.log(n)}}var T=t(615);function k(e,{total:t,id:a}){if(e.innerHTML="",!t||!a)return router.navigate(PAGES.INDEX);e.append(function({total:e,orderId:t}){const a=p({tagName:"section",className:"order-success__container"});a.innerHTML=`\n    <h1 class="header">Merci pour votre commande : ${t}</h1>\n    <p>Le prix total: ${e}¥</p>\n  `;const r=p({tagName:"button",className:"btn--basic"});return r.innerText="Retour à l'accueil",r.addEventListener("click",(()=>{s.navigate(n)})),a.append(r),a}({total:t,orderId:a}))}var S=t(379),$=t.n(S),E=t(974);$()(E.Z,{insert:"head",singleton:!1}),E.Z.locals,new class{constructor(){this.rootContainer=document.getElementById("main"),this.navbarContainer=document.getElementById("navbar"),this.start()}start(){s.set("",g.bind(null,this.rootContainer),!0),s.set(e,w.bind(null,this.rootContainer),!1),s.set(a,I.bind(null,this.rootContainer),!1),s.set(r,k.bind(null,this.rootContainer),!1),function(t){const a=p({tagName:"div",className:"navbar__inner-container"});a.append(function(){const e=p({tagName:"button",className:"navbar__btn",attributes:{"aria-label":"Aller à l'accueil"}}),t=p({tagName:"img",attributes:{src:T,alt:"Orinoco logo"}});return e.appendChild(t),e.addEventListener("click",(()=>s.navigate(n))),e}(),function(){const n=p({tagName:"div",className:"cart-btn__container"}),t=p({tagName:"div",className:"badge--cart",attributes:{id:"cart-badge"}}),a=p({tagName:"button",className:"navbar__btn",attributes:{"aria-label":"Aller au panier"}}),r=p({tagName:"i",className:"fas fa-shopping-cart"});return a.appendChild(r),a.addEventListener("click",(()=>s.navigate(e))),n.append(a,t),n}()),t.appendChild(a)}(this.navbarContainer),u.displayItemsNumber(),s.init()}}})()})();